(this["webpackJsonptime-limited-sns"]=this["webpackJsonptime-limited-sns"]||[]).push([[0],{34:function(e,t,a){e.exports=a.p+"static/media/delete-message.a4b91b6f.svg"},38:function(e,t,a){e.exports=a.p+"static/media/upload-image.f7f24d9a.svg"},39:function(e,t){e.exports="data:image/png;base64,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"},42:function(e,t,a){e.exports=a(70)},47:function(e,t,a){},48:function(e,t,a){},50:function(e,t,a){},59:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(17),i=a.n(s),o=(a(47),a(6)),c=a(7),l=a(10),A=a(8),u=a(11),d=(a(48),a(3)),m=a.n(d),f=(a(50),a(21)),h=a.n(f),p=a(15),g=a(24),E=a.n(g);a(54),a(71),a(56),a(72);E.a.initializeApp({apiKey:"AIzaSyCHftesHfgg_vO29DkbpUbLOZYn4q9JpKM",authDomain:"mayfly-86915.firebaseapp.com",databaseURL:"https://mayfly-86915.firebaseio.com",projectId:"mayfly-86915",storageBucket:"mayfly-86915.appspot.com",messagingSenderId:"490409158667",appId:"1:490409158667:web:bf0ec8a4625217dc61ff0e",measurementId:"G-G211MXL861"}),E.a.analytics();var v=E.a,b=a(41),w=(a(59),a(34)),O=a.n(w),Q=v.firestore(),I=v.auth();var P=function(e){var t=e.post,a=t.postedAt.tz("Asia/Tokyo").format("YYYY-MM-DD HH:mm:ss"),s=Object(n.useState)(!1),i=Object(b.a)(s,2),o=i[0],c=i[1];return r.a.createElement("article",{id:t.id,className:"Post",style:{display:"".concat(o?"none":"")}},r.a.createElement("div",{className:"Post-user-icon"},r.a.createElement(p.b,{className:"Post-username",to:"/users/"+t.author.id},r.a.createElement("img",{src:t.author.profilePictureURL,alt:"profile"}))),r.a.createElement("div",{className:"Post-username-timestamp-content"},r.a.createElement("div",{className:"Post-top-line"},r.a.createElement("div",{className:"Post-top-line-left-side"},r.a.createElement(p.b,{className:"Post-username",to:"/users/"+t.author.id},t.author.name),r.a.createElement("span",{className:"Post-timestamp"},"\u3000\xb7\u3000",a)),r.a.createElement("div",{className:"Post-top-line-right-side"},t.author.id===I.currentUser.uid?r.a.createElement("img",{className:"Post-delete-icon",src:O.a,alt:"delete",onClick:function(){return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f")){e.next=5;break}return e.next=4,m.a.awrap(Q.collection("posted-contents").doc(t.id).delete());case 4:c(!0);case 5:case"end":return e.stop()}}))}}):"")),r.a.createElement("div",{className:"Post-content"},t.content)))},B=v.firestore(),C=new Map,D=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(A.a)(t).call(this,e))).state={error:null,isLoaded:!1,posts:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;B.collection("posted-contents").where("postedAt",">=",h()().subtract(1,"hours").toDate()).orderBy("postedAt","desc").limit(20).get().then((function(t){Promise.all(t.docs.map((function(e){var t,a,n,r;return m.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.data().author.id,void 0===(a=C.get(t))){s.next=6;break}n={id:t,name:a.name,profilePictureURL:a.profilePictureURL},s.next=10;break;case 6:return s.next=8,m.a.awrap(e.data().author.get());case 8:r=s.sent,n={id:r.id,name:r.data().name,profilePictureURL:r.data().profilePictures.small};case 10:return C.set(n.id,{name:n.name,profilePictureURL:n.profilePictureURL}),s.abrupt("return",{id:e.id,content:e.data().body,postedAt:h.a.unix(e.data().postedAt.seconds),author:n});case 12:case"end":return s.stop()}}))}))).then((function(t){e.setState({isLoaded:!0,posts:t})}))})).catch((function(t){console.log("Error getting documents: ",t),e.setState({isLoaded:!0,error:t})}))}},{key:"render",value:function(){var e=this.state,t=e.error,a=e.isLoaded,n=e.posts;if(t)return r.a.createElement("div",null,"Error: ",t.message);if(a){var s=[],i=!0,o=!1,c=void 0;try{for(var l,A=n[Symbol.iterator]();!(i=(l=A.next()).done);i=!0){var u=l.value;s.push(r.a.createElement(P,{key:u.id,post:u}))}}catch(d){o=!0,c=d}finally{try{i||null==A.return||A.return()}finally{if(o)throw c}}return r.a.createElement("div",null,r.a.createElement("div",{className:"Timeline-post-button"},r.a.createElement(p.b,{className:"Timeline-post-button",to:"/compose/post/"},r.a.createElement("button",null,"\u6295\u7a3f"))),s.length<=0?r.a.createElement("div",null,"\u307e\u3060\u6295\u7a3f\u304c\u3042\u308a\u307e\u305b\u3093\u3002"):s)}return r.a.createElement("div",null,"Fetching...")}}]),t}(r.a.Component),x=a(19),y=a(14),j=(a(64),v.firestore()),M=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(A.a)(t).call(this,e))).state={error:null,isUserProfileLoaded:!1,isUserPostsLoaded:!1,user:{id:e.match.params.id,name:"",profilePictureMiddle:""},posts:[]},a.confirmDeletionAccount=a.confirmDeletionAccount.bind(Object(y.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;j.collection("users").doc(this.state.user.id).get().then((function(t){if(!t.exists)throw new Error("\u30e6\u30fc\u30b6\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093");var a=e.state.user;a.name=t.data().name,a.profilePictureMiddle=t.data().profilePictures.middle,e.setState({isUserProfileLoaded:!0,user:a}),e.fetchPostedContentsOfUser(e,t.ref)})).catch((function(t){console.error("Failed to get user profile.",t),e.setState({isUserProfileLoaded:!0,error:t})}))}},{key:"fetchPostedContentsOfUser",value:function(e,t){j.collection("posted-contents").where("author","==",t).where("postedAt",">=",h()().subtract(1,"hours").toDate()).orderBy("postedAt","desc").limit(20).get().then((function(t){Promise.all(t.docs.map((function(t){return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",{id:t.id,content:t.data().body,postedAt:h.a.unix(t.data().postedAt.seconds),author:{id:e.state.user.id,name:e.state.user.name,profilePictureURL:e.state.user.profilePictureMiddle}});case 1:case"end":return a.stop()}}))}))).then((function(t){e.setState({isUserPostsLoaded:!0,posts:t})}))})).catch((function(t){console.error("Failed to get user's posts: ",t),e.setState({isUserPostsLoaded:!0,error:t})}))}},{key:"confirmDeletionAccount",value:function(){var e,t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.confirm("\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f")){a.next=18;break}return a.prev=2,a.next=5,m.a.awrap(this.deleteUserAccount());case 5:a.next=18;break;case 7:if(a.prev=7,a.t0=a.catch(2),"auth/requires-recent-login"!==a.t0.code){a.next=16;break}return window.alert("\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u524a\u9664\u3059\u308b\u305f\u3081\u306bTwitter\u306e\u518d\u8a8d\u8a3c\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u3053\u306e\u753b\u9762\u306b\u518d\u3073\u623b\u3063\u3066\u304d\u305f\u5f8c\u306b\u6539\u3081\u3066\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u524a\u9664\u3092\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002"),e=v.auth().currentUser,t=new v.auth.TwitterAuthProvider,a.next=15,m.a.awrap(e.reauthenticateWithRedirect(t));case 15:return a.abrupt("return");case 16:console.error("Failed to delete account",a.t0),window.alert("\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f");case 18:case"end":return a.stop()}}),null,this,[[2,7]])}},{key:"deleteUserAccount",value:function(){return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Delete user account"),e.next=3,m.a.awrap(v.auth().currentUser.delete());case 3:window.alert("\u4eca\u307e\u3067\u3054\u5229\u7528\u3044\u305f\u3060\u304d\u3001\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\n\u30a2\u30ab\u30a6\u30f3\u30c8\u524a\u9664\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002\n\u306a\u304a\u3001Twitter\u306e\u30a2\u30d7\u30ea\u9023\u643a\u306b\u3064\u3044\u3066\u306f\u3001Twitter\u5074\u306e\u5236\u9650\u306e\u305f\u3081\n\u304a\u5ba2\u69d8\u81ea\u8eab\u3067\u89e3\u9664\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u89e3\u9664\u3059\u308b\u306b\u306f\u3001\u3053\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u6d88\u3057\u305f\u5f8c\u306b\u8868\u793a\u3055\u308c\u308bTwitter\u753b\u9762\u304b\u3089\n\u300c\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u53d6\u308a\u6d88\u3059\u300d\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),window.location.href="https://twitter.com/settings/applications/17209810";case 5:case"end":return e.stop()}}))}},{key:"render",value:function(){var e=this.state,t=e.error,a=e.isUserProfileLoaded,n=e.isUserPostsLoaded,s=e.user;if(t)return r.a.createElement("div",null,"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f: ",t.message);if(a){var i;if(n){var o=[],c=!0,l=!1,A=void 0;try{for(var u,d=this.state.posts[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){var m=u.value;o.push(r.a.createElement(P,{key:m.id,post:m}))}}catch(h){l=!0,A=h}finally{try{c||null==d.return||d.return()}finally{if(l)throw A}}i=o.length<=0?r.a.createElement("div",null,"\u307e\u3060\u6295\u7a3f\u304c\u3042\u308a\u307e\u305b\u3093\u3002"):o}else i=r.a.createElement("div",null,"\u3053\u306e\u30e6\u30fc\u30b6\u306e\u6295\u7a3f\u3092\u53d6\u5f97\u4e2d\u3067\u3059\u3002");var f=r.a.createElement("div",{className:"UserProfile-menu"},r.a.createElement("div",{className:"UserProfile-edit-button"},r.a.createElement(p.b,{className:"UserProfile-edit-button",to:"/settings/profile/"},r.a.createElement("button",null,"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u3092\u7de8\u96c6"))),r.a.createElement("div",{className:"UserProfile-delete-button"},r.a.createElement("button",{onClick:this.confirmDeletionAccount},"\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u524a\u9664")));return r.a.createElement("div",{className:"UserProfile"},r.a.createElement("div",{className:"UserProfile-top"},r.a.createElement("div",{className:"UserProfile-photo"},r.a.createElement("img",{src:s.profilePictureMiddle,alt:"profile"})),r.a.createElement("div",{className:"UserProfile-name"},s.name),s.id===v.auth().currentUser.uid?f:""),r.a.createElement("div",{className:"UserProfile-posted-contents"},i))}return r.a.createElement("div",null,"\u30e6\u30fc\u30b6\u60c5\u5831\u3092\u53d6\u5f97\u4e2d\u3067\u3059\u30fb\u30fb\u30fb")}}]),t}(r.a.Component),k=(a(65),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"signIn",value:function(){var e=new v.auth.TwitterAuthProvider;v.auth().signInWithRedirect(e)}},{key:"render",value:function(){return r.a.createElement("div",{className:"SignIn"},r.a.createElement("div",{className:"SignIn-top-message"},r.a.createElement("span",null,"SNS\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092"),r.a.createElement("span",null,"\u3042\u3068\u304b\u3089\u6d88\u3059\u306e\u306b"),r.a.createElement("span",null,"\u75b2\u308c\u305f\u3042\u306a\u305f\u3078")),r.a.createElement("div",{className:"SignIn-description"},r.a.createElement("span",null,"\u30ab\u30b2\u30ed\u30a6\u306f\u3001\u6295\u7a3f\u3057\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u304c"),r.a.createElement("span",null,"1\u6642\u9593\u3067\u6d88\u3048\u308bSNS\u3067\u3059\u3002"),r.a.createElement("br",null),r.a.createElement("span",null,"\u3055\u3042\u3001\u30ab\u30b2\u30ed\u30a6\u3092\u4f7f\u3063\u3066\u3001\u3042\u3068\u3067\u6d88\u3059\u624b\u9593\u304b\u3089"),r.a.createElement("span",null,"\u89e3\u653e\u3055\u308c\u307e\u3057\u3087\u3046\uff01")),r.a.createElement("div",{className:"SignIn-button"},r.a.createElement("button",{onClick:this.signIn},r.a.createElement("span",null,"Twitter\u30a2\u30ab\u30a6\u30f3\u30c8\u3067"),r.a.createElement("span",null,"\u65b0\u898f\u767b\u9332\uff0f\u30ed\u30b0\u30a4\u30f3"))),r.a.createElement("div",{className:"SignIn-description"},"\u3061\u306a\u307f\u306b\u3001\u30ab\u30b2\u30ed\u30a6\u3068\u3044\u3046\u540d\u524d\u306f\u6606\u866b\u306e\u30ab\u30b2\u30ed\u30a6\uff08\u8709\u8763\uff09\u304b\u3089\u6765\u3066\u3044\u307e\u3059\u3002 \u6606\u866b\u306e\u30ab\u30b2\u30ed\u30a6\u306e\u6210\u866b\u306f\u5bff\u547d\u304c1\u65e5\u3068\u77ed\u547d\u306a\u305f\u3081\u3001 \u300c\u30e1\u30c3\u30bb\u30fc\u30b8\u304c1\u6642\u9593\u3067\u6d88\u3048\u308b\u300d\u3068\u3044\u3046\u3053\u306eSNS\u306e\u7279\u5fb4\u3068\u8fd1\u3044\u3082\u306e\u3092\u611f\u3058\u3001\u3053\u306e\u540d\u524d\u306b\u3057\u307e\u3057\u305f\u3002"))}}]),t}(r.a.Component)),U=(a(66),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(A.a)(t).call(this,e))).state={body:"",postButtonDisabled:!0,textareaDisabled:!1},a.handleChange=a.handleChange.bind(Object(y.a)(a)),a.postMessage=a.postMessage.bind(Object(y.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState({body:e.target.value,postButtonDisabled:!e.target.value})}},{key:"postMessage",value:function(e){this.setState({postButtonDisabled:!0,textareaDisabled:!0});var t=v.firestore();t.collection("posted-contents").add({body:this.state.body,postedAt:v.firestore.FieldValue.serverTimestamp(),author:t.collection("users").doc(v.auth().currentUser.uid)}).then((function(e){window.history.back()})).catch((function(e){console.error("Error adding document: ",e),alert("\u6295\u7a3f\u6642\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\n"+e)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"PostPage"},r.a.createElement("div",null,r.a.createElement("textarea",{rows:"10",cols:"50",autoFocus:!0,minLength:"1",maxLength:"200",placeholder:"\u3044\u307e\u4f55\u3057\u3066\u308b\uff1f",required:!0,onChange:this.handleChange,disabled:this.state.textareaDisabled})),r.a.createElement("div",{className:"PostPage-post-button"},r.a.createElement("button",{onClick:this.postMessage,disabled:this.state.postButtonDisabled},"\u6295\u7a3f")))}}]),t}(r.a.Component)),H=(a(67),a(75)),N=a(23),z=a.n(N),Y=a(37),L=a(38),S=a.n(L),T=v.firestore(),F=v.storage().ref(),R=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(A.a)(t).call(this,e))).state={userID:v.auth().currentUser.uid,userName:"",profilePictureURL:"",newMiddleProfilePictureBuffer:"",newSmallProfilePictureBuffer:"",isUserProfileLoaded:!1,saveButtonDisabled:!0,nameInputAreaDisabled:!1},a.handleChange=a.handleChange.bind(Object(y.a)(a)),a.saveProfile=a.saveProfile.bind(Object(y.a)(a)),a.onUploadedImage=a.onUploadedImage.bind(Object(y.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;T.collection("users").doc(this.state.userID).get().then((function(t){if(!t.exists)throw new Error("\u30e6\u30fc\u30b6\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093");e.setState({isUserProfileLoaded:!0,userName:t.data().name,profilePictureURL:t.data().profilePictures.middle})})).catch((function(t){console.error("Failed to get user profile.",t),e.setState({isUserProfileLoaded:!0,error:t})}))}},{key:"handleChange",value:function(e){this.setState({userName:e.target.value,saveButtonDisabled:!e.target.value})}},{key:"saveProfile",value:function(e){var t,a,n,r,s,i;return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({saveButtonDisabled:!0,nameInputAreaDisabled:!0}),t={name:this.state.userName},!this.state.newSmallProfilePictureBuffer){e.next=19;break}return a={contentType:"image/jpeg"},e.next=6,m.a.awrap(F.child("users/".concat(this.state.userID,"/profile_small.jpg")).put(this.state.newSmallProfilePictureBuffer,a));case 6:return n=e.sent,e.next=9,m.a.awrap(n.ref.getDownloadURL());case 9:return r=e.sent,console.log("Uploaded a small picure as "+r),e.next=13,m.a.awrap(F.child("users/".concat(this.state.userID,"/profile_middle.jpg")).put(this.state.newMiddleProfilePictureBuffer,a));case 13:return s=e.sent,e.next=16,m.a.awrap(s.ref.getDownloadURL());case 16:i=e.sent,console.log("Uploaded a middle picure as "+i),t.profilePictures={middle:i,small:r};case 19:T.collection("users").doc(this.state.userID).update(t).then((function(){window.history.back()})).catch((function(e){console.error("Failed to update user profile.",e),alert("\u4fdd\u5b58\u6642\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\n"+e)}));case 20:case"end":return e.stop()}}),null,this)}},{key:"onUploadedImage",value:function(e,t){var a=this;if(!(e.length<1)){var n=e[0];if("image/jpeg"===n.type){var r=this;this.resizeImageFile(n,200).then((function(e){return r.setState({newMiddleProfilePictureBuffer:e}),n})).then((function(e){return a.resizeImageFile(e,48)})).then((function(e){r.setState({newSmallProfilePictureBuffer:e,saveButtonDisabled:!1})})).catch((function(e){console.error("Failed to read the uploaded image. ".concat(e)),alert("\u753b\u50cf\u306e\u8aad\u307f\u8fbc\u307f\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u672a\u5bfe\u5fdc\u306e\u753b\u50cf\u5f62\u5f0f\u3067\u3042\u308b\u53ef\u80fd\u6027\u304c\u9ad8\u3044\u3067\u3059\u3002")}))}else alert("JPEG\u5f62\u5f0f\u306e\u753b\u50cf\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044")}}},{key:"resizeImageFile",value:function(e,t){var a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.awrap(z.a.read(URL.createObjectURL(e)));case 2:return(a=n.sent).resize(t,t),n.abrupt("return",Object(Y.promisify)(a.getBuffer.bind(a))(z.a.MIME_JPEG));case 5:case"end":return n.stop()}}))}},{key:"render",value:function(){return this.state.error?r.a.createElement("div",null,"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f: ",this.state.error.message):this.state.isUserProfileLoaded?r.a.createElement("div",{className:"ProfileEdit"},r.a.createElement("div",null,r.a.createElement("h1",null,"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u7de8\u96c6"),r.a.createElement("div",{className:"ProfileEdit-image-area"},r.a.createElement(H.a,{accept:"image/jpeg",onChange:this.onUploadedImage},r.a.createElement("img",{className:"ProfileEdit-profile-img",src:this.state.newMiddleProfilePictureBuffer?"data:image/jpeg;base64,"+this.state.newMiddleProfilePictureBuffer.toString("base64"):this.state.profilePictureURL,alt:"profile"}),r.a.createElement("img",{className:"ProfileEdit-upload-icon",src:S.a,alt:"upload"}))),r.a.createElement("div",{className:"ProfileEdit-text"},r.a.createElement("label",null,r.a.createElement("div",null,"\u540d\u524d:"),r.a.createElement("input",{type:"text",required:!0,minLength:"1",maxLength:"50",value:this.state.userName,placeholder:"\u540d\u524d\u3092\u8ffd\u52a0",onChange:this.handleChange,disabled:this.state.nameInputAreaDisabled})),r.a.createElement("div",null,"1/50"))),r.a.createElement("div",{className:"ProfileEdit-save-button"},r.a.createElement("button",{onClick:this.saveProfile,disabled:this.state.saveButtonDisabled},"\u4fdd\u5b58"))):r.a.createElement("div",null,"\u30e6\u30fc\u30b6\u60c5\u5831\u3092\u53d6\u5f97\u4e2d\u3067\u3059\u30fb\u30fb\u30fb")}}]),t}(r.a.Component),Z=a(39),G=a.n(Z),J=a(40),X=a.n(J),W=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(A.a)(t)).call.apply(e,[this].concat(r)))).state={loggedInUser:null,checked_signin:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.auth().onAuthStateChanged((function(t){e.setState({loggedInUser:t,checked_signin:!0})}))}},{key:"signOut",value:function(){v.auth().signOut()}},{key:"render",value:function(){var e,t,a=this,n=r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement("header",{className:"App-header"},r.a.createElement("div",null,r.a.createElement(p.b,{className:"App-link",to:"/"},"\u30ab\u30b2\u30ed\u30a6\uff08\u958b\u767a\u4e2d\uff09")),r.a.createElement("div",null,r.a.createElement(p.b,{to:"/users/"+(null===(e=this.state.loggedInUser)||void 0===e?void 0:e.uid)},r.a.createElement("img",{src:null===(t=this.state.loggedInUser)||void 0===t?void 0:t.photoURL,alt:"profile"}))),r.a.createElement("div",{className:"App-header-signout-button"},r.a.createElement("button",{onClick:this.signOut},"\u30ed\u30b0\u30a2\u30a6\u30c8"))),r.a.createElement("main",{className:"App-main"},r.a.createElement(x.a,{exact:!0,path:"/",component:D}),r.a.createElement(x.a,{exact:!0,path:"/users/:id",component:M}),r.a.createElement(x.a,{exact:!0,path:"/compose/post/",component:U}),r.a.createElement(x.a,{exact:!0,path:"/settings/profile/",component:R}))));return r.a.createElement("div",{className:"App"},r.a.createElement(X.a,{url:G.a}),a.state.checked_signin?a.state.loggedInUser?n:r.a.createElement(k,null):r.a.createElement("div",null,"\u30ed\u30b0\u30a4\u30f3\u72b6\u614b\u3092\u78ba\u8a8d\u4e2d\u3067\u3059\u3002",r.a.createElement("br",null),"\u5c11\u3005\u304a\u5f85\u3061\u4e0b\u3055\u3044\u3002\uff08\u6570\u79d2\u304b\u304b\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\uff09"))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.82c9172f.chunk.js.map